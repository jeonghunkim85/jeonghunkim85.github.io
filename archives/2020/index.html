
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Deliwind">
    <title>Archives: 2020 - Deliwind</title>
    <link rel="canonical" href="https://blog2.deliwind.com/archives/2020/">
    <meta name="author" content="shockshot@naver.com">
    
    
    
        
            <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss2.xml">
        
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Deliwind">
<meta property="og:url" content="https://blog2.deliwind.com/archives/2020/index.html">
<meta property="og:site_name" content="Deliwind">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="shockshot@naver.com">
<meta name="twitter:card" content="summary">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-kvpycffeiaxsbgvbkdhwiqlinu750trh6s9bqthsefrjo7rf1q2lj1oqxj7d.min.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-159338205-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-159338205-1');
    </script>


    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/%20" aria-label>
            Deliwind
        </a>
    </div>
    
        
            <a class="header-right-picture " href="#about" aria-label="Open the link: /#about">
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/" rel="noopener" title="Home">
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-categories" rel="noopener" title="Categories">
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-tags" rel="noopener" title="Tags">
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-archives" rel="noopener" title="Archives">
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link open-algolia-search" href="#search" rel="noopener" title="Search">
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="#about" rel="noopener" title="About">
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/jeonghunkim85" target="_blank" rel="external nofollow noopener noreferrer" title="GitHub">
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="mailto:shockshot@naver.com" target="_blank" rel="external nofollow noopener noreferrer" title="Mail">
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://blog.deliwind.com" target="_blank" rel="noopener" title="Another blog">
                        <i class="sidebar-button-icon fa fa-blog" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Another blog</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2" class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/20201202/Big-Sur-VSCode-%ED%84%B0%EB%AF%B8%EB%84%90-%EB%81%8A%EA%B9%80-%EB%9E%99-%ED%95%B4%EA%B2%B0%EB%B0%A9%EB%B2%95/" aria-label=": Big Sur - VSCode 터미널 끊김(랙) 해결방법">
                            Big Sur - VSCode 터미널 끊김(랙) 해결방법
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-12-02T22:54:09+09:00">
	
		    Dec 02, 2020
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="🧛🏻‍♀️-Big-Sur-업데이트-하고"><a href="#🧛🏻‍♀️-Big-Sur-업데이트-하고" class="headerlink" title="🧛🏻‍♀️ Big Sur 업데이트 하고"></a>🧛🏻‍♀️ Big Sur 업데이트 하고</h2><p>요즘 개발자들 중 많은 수가 맥북을 사용할 것이다. 얼마전 Mac OS 11 - Big Sur 정식 버전이 release 되었고, 업데이트를 보면 참을수 없는 유혹을 느끼는 나는 그 소식을 듣자마자 바로! 그것도 업무용 컴퓨터에! 설치해버렸다.<br>2~3년 전에는 Mac OS 업데이트 할때마다 버그도 많고 안정성도 예전같지 않아서 업데이트를 바로 설치하는 것을 꺼렸었는데, 근래에는 좀 나아진 모습을 보이는 것 같아서(어디까지나 주관적인 생각이다) 믿고 업데이트를 했다. 화사하고 iPad OS 같은 예쁜 모습에 만족도 잠시, 자잘한 버그들이 하나 둘 눈에 띄기 시작했다.</p>
<h2 id="🤮-VSCode-의-Terminal에서-랙이-생긴다"><a href="#🤮-VSCode-의-Terminal에서-랙이-생긴다" class="headerlink" title="🤮 VSCode 의 Terminal에서 랙이 생긴다"></a>🤮 VSCode 의 Terminal에서 랙이 생긴다</h2><p>다른 문제는 차치하고서라도, 회사에서 주로 쓰는 VSCode 사용시 터미널이 한번씩 반응을 멈췄다가 하는 문제였다. 처음에는 SpotLight 가 잡아먹는 cpu/ssd 부하가 좀 높은 편이길래 ‘아~ indexing 때문에 이렇게 버벅거리는구나…’ 했었지만, 며칠간 계속 써봐도 도통 나아질 기미가 보이지를 않았다. 사실 개발자는 검색을 얼마나 잘 하는지도 개발자의 실력 중 하나인데, 이런 부분은 어떻게 검색해야 하나 검색어부터 좀 난감해 하던 찰나, 이런 저런 검색어로 검색을 해보다 우연히 발견 했다.</p>
<img src="/20201202/Big-Sur-VSCode-%ED%84%B0%EB%AF%B8%EB%84%90-%EB%81%8A%EA%B9%80-%EB%9E%99-%ED%95%B4%EA%B2%B0%EB%B0%A9%EB%B2%95/image1.png" class title="big_sur_vscode_terminal_lag">

<p>오.. 역시 외국에서도 비슷한 문제를 겪고 있는 사람들이 많구나~</p>
<p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/microsoft/vscode/issues/105446">https://github.com/microsoft/vscode/issues/105446</a></p>
<p>오픈된 이슈 글을 보면 대략적으로 23초~24초마다 한번씩 spike가 튄다고 돼있다.</p>
<h2 id="❓-원인은"><a href="#❓-원인은" class="headerlink" title="❓ 원인은?"></a>❓ 원인은?</h2><p>Big Sur의 문제인지 VSCode를 실행할때 사용하는 electron의 문제인지는 명확히 모른다. But, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/electron/electron/issues/26143">Big Sur 에서 서명된 electron 앱의 child process가 lock 된다는 글</a>을 봤을땐 Big Sur와 electron, 그리고 signing의 문제인 듯 하다.</p>
<h2 id="👩🏻‍🔬-해결책은"><a href="#👩🏻‍🔬-해결책은" class="headerlink" title="👩🏻‍🔬 해결책은?"></a>👩🏻‍🔬 해결책은?</h2><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/microsoft/vscode/issues/105446#issuecomment-722264044">여기</a> 👈🏻</p>
<figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">codesign --remove-signature /Applications/Visual\ Studio\ Code.app/Contents/Frameworks/Code\ Helper\ \(Renderer\).app</span><br></pre></td></tr></table></figure>

<p>Mac OS 의 codesign 프로그램으로 사인을 제거해주면 일단 해결된다. 일렉트론이 버전 업 하면서 이 문제를 해결할지 어쩔지는 모르겠지만.. 일단 터미널에서 위 명령을 실행한 뒤 <strong>VSCode를 완전히 재시작</strong> 하면 터미널 랙에서는 완전히 해방됐다.</p>
<img src="/20201202/Big-Sur-VSCode-%ED%84%B0%EB%AF%B8%EB%84%90-%EB%81%8A%EA%B9%80-%EB%9E%99-%ED%95%B4%EA%B2%B0%EB%B0%A9%EB%B2%95/image2.jpg" class title="problem_solved!">

                    
                        


                    
                    
                        <p>
                            <a href="/20201202/Big-Sur-VSCode-%ED%84%B0%EB%AF%B8%EB%84%90-%EB%81%8A%EA%B9%80-%EB%9E%99-%ED%95%B4%EA%B2%B0%EB%B0%A9%EB%B2%95/#post-footer" class="postShorten-excerpt_link link" aria-label>
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/20201127/java-swagger-ui-3-0-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/" aria-label=": java-swagger-ui-3.0-사용하기">
                            java-swagger-ui-3.0-사용하기
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-11-27T23:15:27+09:00">
	
		    Nov 27, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Java/">Java</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>그동안 이직하고 적응하느라 바빴다는 핑계로.. 글을 쓰지 않다가 정말 오랜만에 글을 하나 쓴다. 별로 대단히 길게 쓸 글은 아니고, 최근 개인 프로젝트를 시작하며 그동안 손에서 놓아두었던 java 개발을 다시 하려고 프로젝트 셋팅을 진행하다가 삽질한 경험이다.</p>
<p>swagger가 어느덧 3.0 버전이 나왔다길래 사용해볼까 싶어서 셋팅 하다 보니 뭔가 생각대로 되지 않아 짧게 셋팅하는 방법을 적어본다. 셋팅하는 방법은 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://medium.com/@hala3k/setting-up-swagger-3-with-spring-boot-2-a7c1c3151545">#링크</a> 를 참조 했다.</p>
<h2 id="🌿-dependency-추가"><a href="#🌿-dependency-추가" class="headerlink" title="🌿 dependency 추가"></a>🌿 dependency 추가</h2><p>필자는 gradle만 사용하므로 gradle 버전만 작성해놓겠다.</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    implementation <span class="string">&quot;io.springfox:springfox-boot-starter:3.0.0&quot;</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>swagger 3.0 오면서 편해졌다. <code>springfox-boot-starter</code> 하나만 추가 하면 얘가 필요한 dependency를 다 들고 있기 때문에 신경 쓸게 적다.</p>
<img src="/20201127/java-swagger-ui-3-0-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/image1.png" class title="dependencies">

<h2 id="⚙-설정파일-추가"><a href="#⚙-설정파일-추가" class="headerlink" title="⚙ 설정파일 추가"></a>⚙ 설정파일 추가</h2><p>사실 이렇게만 해도 spring boot app 구동 시에 자동으로 뜨긴 한다.<br>그렇지만 간단한 설정을 추가해 보자.</p>
<p>적당한 곳에 config 관련 패키지를 추가하고 <code>SwaggerConfig.java</code> 파일을 추가하자.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.deliwind.grams.configrations;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.PathSelectors;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.RequestHandlerSelectors;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spi.DocumentationType;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spring.web.plugins.Docket;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">api</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.OAS_30) <span class="comment">// open api spec 3.0</span></span><br><span class="line">                .select()</span><br><span class="line">                .apis(RequestHandlerSelectors.any())</span><br><span class="line">                .paths(PathSelectors.any())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="🏃🏻‍♀️-Runtime"><a href="#🏃🏻‍♀️-Runtime" class="headerlink" title="🏃🏻‍♀️ Runtime"></a>🏃🏻‍♀️ Runtime</h2><p>그리고 서버를 띄운 후 <a target="_blank" rel="external nofollow noopener noreferrer" href="http://localhost:8080/swagger-ui/">http://localhost:8080/swagger-ui/</a> 로 접속해보면 swagger-ui 화면을 볼 수 있다.</p>
<img src="/20201127/java-swagger-ui-3-0-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/image2.png" class title="dependencies">

<p>주의할 것은 swagger 2.0과 달리 <strong><em>기본 swagger-ui 접속 Url이 <a target="_blank" rel="external nofollow noopener noreferrer" href="http://localhost:8080/swagger-ui.html">http://localhost:8080/swagger-ui.html</a>이 아닌 <a target="_blank" rel="external nofollow noopener noreferrer" href="http://localhost:8080/swagger-ui/">http://localhost:8080/swagger-ui/</a>로 바뀌었다</em></strong>는 점이다. 이 점을 몰라서 “왜 작동이 안되지? “하면서 한참 헤맸었다.</p>
<p>이직한 곳에서의 주 백엔드 개발 언어가 node.js 에 nest.js를 사용하는 환경이라 좀 생소하다. 나에게 맞지 않는 옷을 입은 느낌이 자꾸 든다. 다양한 경험을 위해 이직한 만큼 이곳에서 또 충분히 성장한 후 언젠가 다시 java로 돌아갈 때가 올거라고 믿기에 자바를 계속 갈고 닦기 위해 개인 프로젝트를 자바로 진행하려 한다.<br>화이팅~</p>
<h2 id="👻-References"><a href="#👻-References" class="headerlink" title="👻 References"></a>👻 References</h2><ul>
<li>코드 참고: <a target="_blank" rel="external nofollow noopener noreferrer" href="https://medium.com/@hala3k/setting-up-swagger-3-with-spring-boot-2-a7c1c3151545">https://medium.com/@hala3k/setting-up-swagger-3-with-spring-boot-2-a7c1c3151545</a></li>
<li>Swagger Reference 문서: <a target="_blank" rel="external nofollow noopener noreferrer" href="https://springfox.github.io/springfox/docs/current/">https://springfox.github.io/springfox/docs/current/</a></li>
<li>Springfox Github: <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/springfox/springfox">https://github.com/springfox/springfox</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a href="/20201127/java-swagger-ui-3-0-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/#post-footer" class="postShorten-excerpt_link link" aria-label>
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/20200518/java-enum%EC%9D%84-%EB%A7%9B%EA%B9%94%EB%82%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%B4-%EB%B3%B4%EC%9E%90/" aria-label=": java enum을 맛깔나게 사용해 보자">
                            java enum을 맛깔나게 사용해 보자
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-18T23:41:00+09:00">
	
		    May 18, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Java/">Java</a>, <a class="category-link" href="/categories/Java/Enum/">Enum</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>원래 Enum에 관련된 글도 이 전 블로그에서 작성했던 적이 있었다. 한번 글들을 날려먹고 두번째 작성하는 글이므로,<br><del>이 전에 작성했던 글만큼의 정성을 들일 수 있을까…..?</del></p>
<p>일단 Java Enum에 대해서는 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://woowabros.github.io/tools/2017/07/10/java-enum-uses.html">내가 지금부터 쓰는 글보다 잘 써 놓은 글</a>이 있으니 먼저 읽어 보는것도 좋을 것 같다.</p>
<p>enum을 사용하는 이유는 여러 가지가 있으나, 가장 큰 이유는 DB의 코드값과 달리 <strong><em>IDE 또는 컴파일 단계에서 지원을 받을수 있다</em></strong>는게 가장 큰 이유일 것이다. 자동완성도 지원하며 매직넘버와 달리 오타를 냈다면 컴파일 단계에서 잡아준다. <del>그말이 그말이잖..</del></p>
<h2 id="장점-장점을-보자"><a href="#장점-장점을-보자" class="headerlink" title="장점, 장점을 보자"></a>장점, 장점을 보자</h2><h4 id="컴파일-단계에서-지원을-받을-수-있다"><a href="#컴파일-단계에서-지원을-받을-수-있다" class="headerlink" title="컴파일 단계에서 지원을 받을 수 있다"></a>컴파일 단계에서 지원을 받을 수 있다</h4><p>IDE에서는 자동완성도 되고, 오타가 났을 경우에 런타임 에러가 아닌 컴파일 에러를 내므로 버그를 만들 확률이 줄어든다.(어디까지나 완벽히 없어지는건 아니다. <del>버그 장인은 도구를 탓하지 않는다</del> )</p>
<h4 id="리팩토링-또는-수정이-쉽다"><a href="#리팩토링-또는-수정이-쉽다" class="headerlink" title="리팩토링 또는 수정이 쉽다"></a>리팩토링 또는 수정이 쉽다</h4><p>값이 추가 되더라도 enum값 하나만 추가 하면 된다. 혹시 enum이 내포하고 있는 값이 달라진다면 enum만 수정하면 된다.</p>
<h4 id="그-외에도"><a href="#그-외에도" class="headerlink" title="그 외에도"></a>그 외에도</h4><p>기본적으로 enum은 선언시 불변객체로 생성되므로 여러번 할당하더라도 새로 object를 생성하는 비용 부담이 덜하고, String과는 달리 equals를 사용하여 비교할 필요가 없다. <code>==</code> 를 사용하여 비교해도 잘 작동한다.</p>
<h2 id="그렇다면-단점은"><a href="#그렇다면-단점은" class="headerlink" title="그렇다면 단점은?"></a>그렇다면 단점은?</h2><h4 id="배포-문제에서-자유롭지-못하다"><a href="#배포-문제에서-자유롭지-못하다" class="headerlink" title="배포 문제에서 자유롭지 못하다"></a>배포 문제에서 자유롭지 못하다</h4><p>컴파일 단계에서 작동해서 IDE의 지원을 받을 수 있다는 건, 반대로 배포 문제에서 자유롭지 못하다는 뜻이기도 하다. 간단한 값 추가가 있다고 하더라도 DB에서 사용하는 코드와는 달리 배포를 해야 한다. 요즘은 CI/CD가 워낙 잘 돼있는데다가 무중단 배포 환경도 손쉽게 구축하여 사용하는 추세라 크게 문제가 안된다고 할 수 있지만, 그렇다고 하더라도 분명 DB에서 손쉽게 추가하는 것에 비하면 부담이 되는 부분은 사실이다.</p>
<p>만약 DB에서 일원화된 persistant 영역에서 관리하는 코드값이라고 하면 코드만 추가 해주면 끝이지만, 여러 서비스에서 사용하는 값이라면 각 서비스 별로 챙겨서 배포해야 하며, 그러다 보면 누락하는 서비스가 있을수도 있다. (<del>그게 우리 서비스도 이랬던 적이 있더랬..</del>) 또한 이런식으로 누락하는 서비스에서 발생하는 오류는 단순히 DB 코드를 추가했다가 생기는 오류보다 더 크리티컬 하다.</p>
<p>enum이 적극적으로 쓰이지 않던 때에는 거의 모든 상태값들을 코드 테이블을 하나 만들어놓고 다 때려 박았다. 사실 배포 문제에서 자유롭지 못한 문제가 있지만, 생각보다 우리가 코드라고 생각하는 아이들은 사실은 코드가 아닌 경우가 많다. 자주 바뀌는 값과 바뀌지 않는 값을 잘 구분해서 자주 바뀌지 않는 녀석들을 enum으로 선언해서 사용하자.</p>
<h4 id="숫자만-넣어서-만들수는-없다"><a href="#숫자만-넣어서-만들수는-없다" class="headerlink" title="숫자만 넣어서 만들수는 없다"></a>숫자만 넣어서 만들수는 없다</h4><p>망치를 든 사람에게는 모든게 못으로 보인다고, enum의 맛을 알게 되면 모든 코드를 enum으로 바꾸고 싶은 욕망에 사로잡히게 된다. 그러나 이렇게 enum으로 하나둘씩 바꾸다 보면 숫자로만 돼있는 코드들은 enum으로 만들 수 없다는 것을 깨닿게 된다.<br>enum의 상태값들은 java의 필드명 정의하는 규칙과 같이 숫자로만 구성할 수는 없다.</p>
<p>사실 대부분 enum 상태값으로 정의하고자 하는 속성은 숫자가 아닌 다른 뜻을 갖고 있는 경우가 많이 있지만 진짜 숫자만 있는 경우라면? 대체할 만한 단어가 없다면??? 그럼 그냥 다른 문자를 붙이는 수밖에 없다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Numbers</span> </span>&#123;</span><br><span class="line">  _1, _2, _3;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>별로 맘에는 안든다. 그렇지만 범위를 제한할 수 없는 int 필드보다는 낫다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Numbers</span> </span>&#123;</span><br><span class="line">  1ST, 2ND, 3RD;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>뭐 이런것도 나쁘지는 않다.</p>
<h2 id="좀-더-고급지게-사용해보자"><a href="#좀-더-고급지게-사용해보자" class="headerlink" title="좀 더 고급지게 사용해보자"></a>좀 더 고급지게 사용해보자</h2><p>자바의 enum은 다른 언어의 enum에 비해서 좀 더 활용도가 높다. 사실 java에서 enum은 하나의 완전한 클래스로 취급 되는데 이 때문에 enum도 인스터스 변수를 가질수도 있고, interface를 implements 하도록 하거나 abstract로 선언할 수도 있으며 method나 static method를 만들수도 있다.</p>
<p>아래 예제를 보자.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Sequences</span></span>&#123;</span><br><span class="line">  FIRST(<span class="number">1</span>),</span><br><span class="line">  SECOND(<span class="number">2</span>),</span><br><span class="line">  THIRD(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> order;</span><br><span class="line"></span><br><span class="line">  Sequences(<span class="keyword">int</span> order) &#123;</span><br><span class="line">    <span class="keyword">this</span>.order = order;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> order;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>이렇게 단순하게 사용하는 경우는 별로 없지만(심지어 java는 <code>ordinal()</code> 이라는 기본 메소드를 제공한다. 그러나 ordinal은 가급적 사용하지 않는것이 좋다. 이유는 후술) 코드에서 보이는 바와 같이 클래스의 모습과 크게 다르지 않다. 더욱이 자바의 enum은 이런 변수를 하나만 사용 가능한 것이 아니라 여러개가 사용 가능하다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Sequences</span></span>&#123;</span><br><span class="line">  FIRST(<span class="number">1</span>, <span class="string">&quot;1st&quot;</span>),</span><br><span class="line">  SECOND(<span class="number">2</span>, <span class="string">&quot;2nd&quot;</span>),</span><br><span class="line">  THIRD(<span class="number">3</span>, <span class="string">&quot;3rd&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> order;</span><br><span class="line">  <span class="keyword">private</span> String shorten;</span><br><span class="line"></span><br><span class="line">  Sequences(<span class="keyword">int</span> order, String shorten) &#123;</span><br><span class="line">    <span class="keyword">this</span>.order = order;</span><br><span class="line">    <span class="keyword">this</span>.shorten = shorten;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> order;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getShorten</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> shorten;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>참고로 <code>FIRST(1, &quot;1st&quot;)</code> 이렇게 enum을 선언하는 구문은 생성자 메소드를 호출하는 방식이기 때문에 생성자를 어떻게 만드느냐에 따라 다른 방식으로도 사용 가능하다. 또한 enum은 static 영역에 저장되기 때문에 enum을 호출할때마다 생성자를 호출하는것이 아니어서 알고리즘의 효율성을 그렇게까지 신경쓰지 않아도 된다.</p>
<p>내가 즐겨 쓰는 방법이다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Media</span> </span>&#123;</span><br><span class="line">  MOVIE(<span class="string">&quot;horror, comedy, sf, family&quot;</span>),</span><br><span class="line">  MUSIC(<span class="string">&quot;dance, balad, rock, classic&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> Set&lt;String&gt; genreSet;</span><br><span class="line">  </span><br><span class="line">  Media(String genreString) &#123;</span><br><span class="line">    <span class="keyword">this</span>.genreSet = Arrays.asList(genreString.split(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">      .stream()</span><br><span class="line">      .map(String::trim)</span><br><span class="line">      .collect(Collectors.toSet());</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(String genre)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.genreSet.contains(genre);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Media <span class="title">determine</span><span class="params">(String genre)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Arrays.asList(Media.values()).stream()</span><br><span class="line">        .filter(media -&gt; media.contains(genre))</span><br><span class="line">        .findFirst()</span><br><span class="line">        .orElseThrow(() -&gt; <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;there is no matched genre&quot;</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>물론 아래 코드처럼 생성자에서 array를 바로 만들어서 받을수도 있겠으나 내 취향은 위 코드가 더 맞아서 주로 이렇게 쓴다. (무엇보다 set의 contains 시간 복잡도가 list보다 더 유리하다)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Media</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  MOVIE(Arrays.asList(<span class="string">&quot;horror&quot;</span>, <span class="string">&quot;comedy&quot;</span>, <span class="string">&quot;sf&quot;</span>, <span class="string">&quot;family&quot;</span>)),</span><br><span class="line">  MUSIC(Arrays.asList(<span class="string">&quot;dance&quot;</span>, <span class="string">&quot;comedy&quot;</span>, <span class="string">&quot;sf&quot;</span>, <span class="string">&quot;family&quot;</span>));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> List&lt;String&gt; genreSet;</span><br><span class="line"></span><br><span class="line">  Media(List&lt;String&gt; genreSet) &#123;</span><br><span class="line">    <span class="keyword">this</span>.genreSet = genreSet;</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>

<p>또한 enum에서 변수로 익명함수를 담고 있을 수도 있기 때문에 이를 사용하면 더욱더 활용도가 높아진다. 간단한 사칙연산을 수행하는 enum이다.<br>(Lombok도 잘 먹혀서, 아래부터는 lombok을 활용해 constructor를 만들어 보겠다.)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Calc</span> </span>&#123;</span><br><span class="line">  ADD(<span class="string">&quot;+&quot;</span>, (a, b) -&gt; a + b),</span><br><span class="line">  SUBTRACT(<span class="string">&quot;-&quot;</span>, (a, b) -&gt; a - b),</span><br><span class="line">  TIMES(<span class="string">&quot;*&quot;</span>, (a, b) -&gt; a * b),</span><br><span class="line">  MOD(<span class="string">&quot;/&quot;</span>, (a, b) -&gt; a / b);</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Getter</span></span><br><span class="line">  <span class="keyword">private</span> String character;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> BiFunction&lt;Integer, Integer, Integer&gt; calculation;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> calculation.apply(a, b);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>아래는 위와 같은 일을 하는 코드를 abstract 메소드를 활용하여 만들어 본 코드이다. (java7)<br>이렇게도 사용 가능하니 적절히 필요에 따라 원하는 방법대로 사용하면 좋다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">Calc</span> </span>&#123;</span><br><span class="line">  ADD(<span class="string">&quot;+&quot;</span>)&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  SUBTRACT(<span class="string">&quot;−&quot;</span>)&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> a - b;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  TIMES(<span class="string">&quot;×&quot;</span>)&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> a * b;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  MOD(<span class="string">&quot;÷&quot;</span>)&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> a / b;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> String character;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>이런식으로 enum에 디자인 패턴을 얹어 사용하면 코드들이 단순 명료해 지는것을 느낄 수 있을 것이다.</p>
<h2 id="왜-ordinal-을-사용하지-않아야-하나"><a href="#왜-ordinal-을-사용하지-않아야-하나" class="headerlink" title="왜 ordinal()을 사용하지 않아야 하나?"></a>왜 <code>ordinal()</code>을 사용하지 않아야 하나?</h2><p>아까 잠깐 언급하고 넘어간 <code>ordinal()</code> 메소드에 대해 이야기 해보자. enum은 순서를 가진 열거형이고, 그 순서값을 int로 반환하는 <code>ordinal()</code>이라는 메소드를 제공해준다. 그러나 ordinal을 사용하게 되면 나중에 유지보수에 문제가 발생하게 된다. (이 부분은 effective java item 35를 보면 자세히 나온다)</p>
<p><strong>중간에 새로운 enum 요소가 끼어 드는 경우 새로운 요소 뒤에 위치한 enum들의 연산은 모두 망가지게 된다.</strong></p>
<p>따라서 ordinal을 사용하는 것보다 차라리 위에서 만든 <code>Sequence</code> enum처럼 인스턴스 필드를 사용하여 int value를 담아두고 이를 return하는 getter를 사용하는것이 더 좋다.</p>
<hr>
<p>내가 java 에서 enum을 사용하는 방법은 이정도이다. 물론 더 다양 하게 사용하는 방법도 있다. (enum 내부에 또 enum을 정의해 사용한다던지, 좀 다른 이야기지만 EnumMap을 사용하는 방법도 있고) 그러나 이정도만 알아도 java enum 초보 티는 좀 벗었다고 할 수 있지 않을까?</p>
<h1 id="끗"><a href="#끗" class="headerlink" title="끗."></a>끗.</h1>
                    
                        


                    
                    
                        <p>
                            <a href="/20200518/java-enum%EC%9D%84-%EB%A7%9B%EA%B9%94%EB%82%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%B4-%EB%B3%B4%EC%9E%90/#post-footer" class="postShorten-excerpt_link link" aria-label>
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/20200430/Java-%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%A0-%EB%95%8C-%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90/" aria-label=": Java 정규표현식을 사용할 때 주의할 점">
                            Java 정규표현식을 사용할 때 주의할 점
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-04-30T00:00:00+09:00">
	
		    Apr 30, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Java/">Java</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>사실 이 이야기는 <code>Effective Java 6장 - 불필요한 객체 생성을 피하라</code> 에 나오는 아주 기초적인 이야기 이다. 그러나 습관이 되지 않아 생각없이 개발하다보면 어느새 이 규칙을 어겨서 어김없이 리팩토링 대상이 되곤 하는데다가, 막상 개발하면서 쓰려다 보면 사용 방법이 잘 생각나지 않아 메모할 겸 짧은 글을 작성 해본다.<br><del>(요즘 좀 정신이 나가 있어서 공부는 꾸준히 하기는 한다만, 공부하는 양은 좀 줄었고, 진도는 좀처럼 나가지가 않는다. 에라이)</del></p>
<p>일반적으로 Java에서 흔히 사용할 수 있는 정규 표현식의 예를 보자. (Junit5)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Utils</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">hasOnlyNumbers</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> s.matches(<span class="string">&quot;[\\d]*&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@DisplayName(&quot;Utils 테스트&quot;)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UtilsTest</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="meta">@DisplayName(&quot;숫자 외의 문자가 있을 경우 false를 return 해야 한다&quot;)</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">should_return_false_when_has_other_characters</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String numbersWithCharacter = <span class="string">&quot;1a2s3d4f5g6&quot;</span>;</span><br><span class="line">    <span class="keyword">boolean</span> expected = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">boolean</span> result = Utils.hasOnlyNumbers(numbersWithCharacter);</span><br><span class="line"></span><br><span class="line">    assertEquals(expected, result);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="meta">@DisplayName(&quot;숫자외의 문자가 없을 경우 true를 return 해야 한다&quot;)</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">should_return_true_when_has_only_numbers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String numbersWithCharacter = <span class="string">&quot;123456789&quot;</span>;</span><br><span class="line">    <span class="keyword">boolean</span> expected = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">boolean</span> result = Utils.hasOnlyNumbers(numbersWithCharacter);</span><br><span class="line"></span><br><span class="line">    assertEquals(expected, result);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="/20200430/Java-%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%A0-%EB%95%8C-%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90/image1.png" class title="테스트결과1">

<p>오케이, 원하는 바를 손쉽게 얻었다. 그러나 지금 얻은 결과는 성능상 좋지 못하다. 사실 일반적인 상황에서 String의 matches 메소드를 사용하는게 엄청나게 성능에 문제를 주는 경우는 별로 없으나, 습관이 중요한데다가, 실제로 이런 코드들이 쌓여 문제를 발생하는 경우도 있으니 좋은 습관을 들이는 게 좋다.<br>이펙티브 자바는 String.matches를 사용하는 것보다 더 <del>고급지고</del>어렵고 성능이 좋은 방법을 알고 있다.</p>
<h2 id="Pattern-클래스를-사용해-보자"><a href="#Pattern-클래스를-사용해-보자" class="headerlink" title="Pattern 클래스를 사용해 보자"></a>Pattern 클래스를 사용해 보자</h2><p>바로 Pattern클래스를 사용해 같은 일을 더 성능 좋게 사용할 수 있다.<br>사실 위 예제의 코드는 메소드가 실행 될때마다 내부적으로 Pattern 인스턴스를 만들고 사용 후 버리는 작업을 수행하게 되는데, 이 Pattern을 final static 객체로 미리 선언해두고 사용하게 되면 메소드가 호출될 때마다 새로 생성하고 버리는 작업이 없어지게 된다.<br>아래 코드를 보자</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Utils</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Pattern ONLY_NUMBERS_PATTERN = Pattern.compile(<span class="string">&quot;[\\d]*&quot;</span>);</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">hasOnlyNumbers</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ONLY_NUMBERS_PATTERN.matcher(s).matches();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/20200430/Java-%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%A0-%EB%95%8C-%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90/image2.png" class title="테스트결과2">

<p>테스트를 잘 통과하는 것을 볼 수 있다. 자, 그럼 얼마만큼의 성능 차이가 날까? </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DisplayName(&quot;Utils 테스트&quot;)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UtilsTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> <span class="keyword">int</span> times = <span class="number">10000000</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="meta">@DisplayName(&quot;리팩토링 후&quot;)</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">test_refactor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> String numbersWithCharacter = <span class="string">&quot;1a2s3d4f5g6&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span>  i=<span class="number">0</span>; i &lt; times; i++)&#123;</span><br><span class="line">      Utils.hasOnlyNumbersRefactor(numbersWithCharacter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="meta">@DisplayName(&quot;리팩토링 전&quot;)</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">test_before_refactor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> String numbersWithCharacter = <span class="string">&quot;1a2s3d4f5g6&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span>  i=<span class="number">0</span>; i &lt; times; i++)&#123;</span><br><span class="line">      Utils.hasOnlyNumbersOriginal(numbersWithCharacter);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>컴퓨팅 성능마다, JVM 셋팅마다 다르겠지만, 메소드 수행을 1000만회 진행 했을때 꽤나 차이가 나는 것을 눈으로 볼 수 있었다.<br>(2.35초 -&gt; 0.83초)</p>
<img src="/20200430/Java-%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%A0-%EB%95%8C-%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90/image3.png" class title="테스트결과3">

<p>이펙티브 자바의 아이템6 에는 이 외에도 다른 팁들도 있으나 일단 오늘은 정규 표현식 부분만 정리했다.</p>
<p>정규 표현식을 사용할때는 기억하자.</p>
<blockquote>
<ol>
<li>static final Pattern 으로 불변객체를 생성해서 사용하자</li>
<li>Pattern p = Pattern.compile(“정규식”);</li>
<li>p.matcher(string).matches();</li>
</ol>
</blockquote>
<h2 id="끗"><a href="#끗" class="headerlink" title="끗"></a>끗</h2>
                    
                        


                    
                    
                        <p>
                            <a href="/20200430/Java-%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%A0-%EB%95%8C-%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90/#post-footer" class="postShorten-excerpt_link link" aria-label>
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/20200411/ConfigurationProperties-%EC%82%AC%EC%9A%A9%EB%B0%A9%EB%B2%95/" aria-label=": @ConfigurationProperties 사용방법">
                            @ConfigurationProperties 사용방법
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-04-11T00:00:00+09:00">
	
		    Apr 11, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Java/">Java</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>Spring boot 에서는 application.yml (또는 application.properties) 파일의 내용을 빈의 변수에 바인딩하도록 도와주는 어노테이션이 있다.<br><code>@Value(&quot;$&#123;property.value&#125;&quot;)</code> 뭐 이런식으로 사용하는데 변수가 늘어남에 따라 어노테이션이 많아져서 가독성을 해치는 경우가 있고, 일일히 지정해주기가 귀찮을 경우 쓸 수 있는 방법인 <code>@ConfigurationProperties</code> 어노테이션에 대해서 간단히 적어 보려 한다.</p>
<h2 id="사용방법"><a href="#사용방법" class="headerlink" title="사용방법"></a>사용방법</h2><p><code>@ConfigurationProperties</code> 는 클래스에 선언하는 어노테이션이다.<br>간단히 아래 예시와 같이 사용한다.</p>
<p>먼저 gradle(또는 maven 빌드 툴)에 아래 dependency를 설정한다.</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">annotationProcessor <span class="string">&#x27;org.springframework.boot:spring-boot-configuration-processor&#x27;</span></span><br></pre></td></tr></table></figure>

<p>yml에 필요한 값들을 설정하고</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">user:</span></span><br><span class="line">  <span class="attr">conf:</span></span><br><span class="line">    <span class="attr">property1:</span> <span class="string">&quot;value1&quot;</span></span><br><span class="line">    <span class="attr">property2:</span> <span class="string">&quot;value2&quot;</span></span><br></pre></td></tr></table></figure>

<p>값들을 사용하고자 하는 클래스에 <code>@ConfigurationProperties</code> 어노테이션을 추가한다. 여기서 prefix도 설정할 수 있다. (user.conf는 예시를 위해 작성해 놓은 것이고, prefix는 다른 값으로도 사용할 수 있다.)<br>주의할 점은 <code>@Value</code> 어노테이션을 활용해 값을 바인딩 하는것과 다르게, 반드시 setter 메소드를 필요로 한다.<br><code>@ConfigurationProperties</code>는 setter 메소드를 사용해 설정값을 바인딩 하기 때문이다. 여기서는 클래스에 <code>@Setter</code> 롬복 어노테이션을 사용해 한번에 정의했다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;user.conf&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> String property1;</span><br><span class="line">  <span class="keyword">private</span> String property2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="끗"><a href="#끗" class="headerlink" title="끗"></a>끗</h2>
                    
                        


                    
                    
                        <p>
                            <a href="/20200411/ConfigurationProperties-%EC%82%AC%EC%9A%A9%EB%B0%A9%EB%B2%95/#post-footer" class="postShorten-excerpt_link link" aria-label>
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/20200405/IntelliJ%EC%97%90%EC%84%9C-http%EB%A1%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EA%B8%B0/" aria-label=": IntelliJ에서 `.http`로 테스트 하기">
                            IntelliJ에서 `.http`로 테스트 하기
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-04-05T00:00:00+09:00">
	
		    Apr 05, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/IntelliJ/">IntelliJ</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="IntelliJ에서-http로-테스트-하기"><a href="#IntelliJ에서-http로-테스트-하기" class="headerlink" title="IntelliJ에서 .http로 테스트 하기"></a>IntelliJ에서 <code>.http</code>로 테스트 하기</h2><p>나는 java 개발을 할 때 IntelliJ를 사용한다. 지금 다니고 있는 회사에 입사하기 전까지는 eclipse 만 사용해봤었고,<br>IntelliJ는 사실 존재 자체도 모르고 있었다. <del>그러나 지금은 intelliJ 없이는 java개발을 할 수 없는 몸이 되어버렷!! 다..</del><br>IntelliJ는 여러 편의 기능을 번들로 제공하고 있는데 그 중 하나가 지금 이야기 하고자 하는 http client 툴이다.</p>
<p>사실 IntelliJ의 Http 툴의 사용방법을 설명한 글을 이전에 블로그에 한번 작성한 적이 있었으나 안타깝게도 블로그와 함께 날려먹었고, 이 툴에 관해 잘 설명해 놓은 글은 굳이 내가 정리하지 않더라도 많이 있다. 그럼에도 불구하고 또 이 툴에 대해서 정리하는 이유는 <strong>내가 잘 보려고</strong></p>
<p>회사에서 개발 일을 하면서 많은 지식을 익히고 이 지식들로 코딩을 하지만, 돌아서고 나면 잊어버린다. 물론 코드에 작업 내용이 남아있어 다시 열어본다면 이해하고 동일한 코드를 만들 수 있지만, 사실 이 코드의 소유는 내가 아니라 회사다. 퇴사를 한다면?? 내가 동일한 코드를 만들 수 있을까? 그래서 내 것으로 만들기 위해 하나씩 정리 하려고 한다.</p>
<h2 id="http-소개"><a href="#http-소개" class="headerlink" title=".http 소개"></a><code>.http</code> 소개</h2><p>이 툴의 명칭은 HTTP Client 쯤 되는것 같다. (HTTP client in IntelliJ IDEA code editor)<br>안타깝게도 <code>ultimate</code> 딱지가 붙어 있는걸 봐서는 intelliJ 커뮤니티 에디션에서는 사용하지 못하는 듯 하다. 레퍼런스 페이지는 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.jetbrains.com/help/idea/http-client-in-product-code-editor.html">#여기</a></p>
<p>간단히 말해 http 호출을 해볼 수 있는 툴이다.</p>
<h2 id="http-를-쓰는-이유"><a href="#http-를-쓰는-이유" class="headerlink" title=".http 를 쓰는 이유"></a><code>.http</code> 를 쓰는 이유</h2><p>익히지 않고 직관적으로 쓰기에는 물론 postman이 더 낫다. swagger도 많이 쓴다. 설치하기 귀찮으면 <code>curl</code>을 사용하기도 한다.<br>내가 <code>.http</code> 를 쓰는 가장 큰 이유는 </p>
<blockquote>
<ol>
<li>Git을 통한 형상 관리</li>
<li>Git으로 팀원과 쉽게 공유가 가능</li>
<li>테스트 툴이므로 초록 막대를 보며 마음의 안정을 얻을 수 있다. (또는 빨간 막대를 볼수도..)</li>
</ol>
</blockquote>
<p>뭐 이 외에도 쓰다보면 여러 장점들을 느낄 수 있겠지만, 일단 이 세가지만으로도 충분히 좋다.</p>
<h2 id="기본-사용법"><a href="#기본-사용법" class="headerlink" title="기본 사용법"></a>기본 사용법</h2><ol>
<li>intelliJ의 프로젝트 explorer에서 적당한 곳에 <code>마우스 우클릭</code> &gt; <code>NEW</code> &gt; <code>HTTP Request</code><img src="/20200405/IntelliJ%EC%97%90%EC%84%9C-http%EB%A1%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EA%B8%B0/image1.png" class title="설명1">

</li>
</ol>
<hr>
<ol start="2">
<li>적당한 파일명을 입력 후 엔터를 치면 <code>.http</code> 로 끝나는 파일이 생성 되고 에디터로 그 파일을 연다.</li>
</ol>
<blockquote>
<p><strong>이 때 주의할 점</strong> 파일명을 <code>status</code>로는 하지 말자. 왠지 모르겠지만, <code>status.http</code> 파일에서는 http 테스트가 활성화가 되지 않는다.</p>
</blockquote>
<img src="/20200405/IntelliJ%EC%97%90%EC%84%9C-http%EB%A1%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EA%B8%B0/image2.png" class title="설명2">

<ol start="3">
<li>이제부터 테스트를 만들면 된다. 아직 우리는 사용법을 잘 모르므로 Examples를 눌러보자. 그럼 친절하게 아래와 같은 내용의 파일이 열린다.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">### GET request with a header</span><br><span class="line">GET https:&#x2F;&#x2F;httpbin.org&#x2F;ip</span><br><span class="line">Accept: application&#x2F;json</span><br><span class="line"></span><br><span class="line">### GET request with parameter</span><br><span class="line">GET https:&#x2F;&#x2F;httpbin.org&#x2F;get?show_env&#x3D;1</span><br><span class="line">Accept: application&#x2F;json</span><br><span class="line"></span><br><span class="line">### GET request with environment variables</span><br><span class="line">GET &#123;&#123;host&#125;&#125;&#x2F;get?show_env&#x3D;&#123;&#123;show_env&#125;&#125;</span><br><span class="line">Accept: application&#x2F;json</span><br><span class="line"></span><br><span class="line">### GET request with disabled redirects</span><br><span class="line"># @no-redirect</span><br><span class="line">GET http:&#x2F;&#x2F;httpbin.org&#x2F;status&#x2F;301</span><br><span class="line"></span><br><span class="line">### GET request with dynamic variables</span><br><span class="line">GET http:&#x2F;&#x2F;httpbin.org&#x2F;anything?id&#x3D;&#123;&#123;$uuid&#125;&#125;&amp;ts&#x3D;&#123;&#123;$timestamp&#125;&#125;</span><br><span class="line"></span><br><span class="line">###</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>각 테스트는 <code>###</code>로 구분한다.</li>
<li>제일 윗줄에 <code>메소드 URL</code> 형식으로 호출하고자 하는 URL을 정의한다.</li>
<li>헤더는 URL 바로 아랫줄에 <code>키: 밸류</code> 형태로, 붙이고자 하는 헤더가 여러개일 경우 계속 줄을 이어서 써준다.</li>
<li>예제에는 안 나왔지만 requestBody를 같이 보내고자 할 경우, 헤더 밑으로 두줄 바꾸고 그 밑에 입력해주면 된다.</li>
</ol>
</blockquote>
<p>기본 사용방법은 이정도이고, <code>&#123;&#123;$uuid&#125;&#125;</code>나 <code>&#123;&#123;host&#125;&#125;</code> 같은게 보이는 것 같지만 기분탓이라 생각하고 일단 넘어가자.<br>대략 사용방법은 봤으니, 우리가 테스트 하고자 하는걸 입력 해보자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET https:&#x2F;&#x2F;google.com</span><br></pre></td></tr></table></figure>

<p>난 이렇게 입력 했다. 좀 편한 방법을 쓰고자 한다면 우측 상단 메뉴에 <code>Add Request</code> 를 마우스로 누르면 snippet 이 나오니 참고할 수 있다.</p>
<p>그리고 초록색 재생 화살표를 누르면 실행되고, 화면 아래에 결과가 나온다.</p>
<img src="/20200405/IntelliJ%EC%97%90%EC%84%9C-http%EB%A1%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EA%B8%B0/image3.png" class title="설명3">
<p><em>► 눌러눌러!!</em></p>
<img src="/20200405/IntelliJ%EC%97%90%EC%84%9C-http%EB%A1%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EA%B8%B0/image4.png" class title="설명4">
<p>구글 호출 했을때 나오는 결과를 볼 수가 있다.</p>
<h2 id="환경변수-설정해서-사용하기"><a href="#환경변수-설정해서-사용하기" class="headerlink" title="환경변수 설정해서 사용하기"></a>환경변수 설정해서 사용하기</h2><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.jetbrains.com/help/idea/http-client-in-product-code-editor.html#using_request_vars">자세한 설명 링크</a></p>
<p>위에 예시로 제시한 테스트 중에 <code>&#123;&#123;host&#125;&#125;</code> 같이 이중 블릿으로 감싼 아이들이 보인다. <code>.http</code> 테스트에서 환경 변수들을 사용할 수 있는데, 여러 환경에 따른 값들을 미리 설정해놓고 필요할때마다 선택해서 실행 할 수 있도록 편리한 기능을 제공해 준다.</p>
<p><code>.http</code> client는 두 종류의 변수를 사용할 수 있는데, Dynamic 변수와 직접 정의한 환경 변수이다. 다이나믹 변수는 <code>$</code>로 시작하고, 아래 세 종류가 있다.</p>
<blockquote>
<ul>
<li>$uuid: 우리가 알고있는 UUID</li>
<li>$timestamp: Unix Timestamp형태의 현재 시각</li>
<li>$randomInt: 0에서 1000 사이의 랜덤 숫자</li>
</ul>
</blockquote>
<p>그리고 우리가 알아볼 환경변수. 환경변수는 프로젝트 내에 <code>rest-client.env.json</code> (또는 <code>http-client.env.json</code>도 가능) 라는 이름의 json 파일을 생성해서 사용한다. 레퍼런스 문서에서 제공하는 예제를 살펴보자.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;development&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;host&quot;</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;id-value&quot;</span>: <span class="number">12345</span>,</span><br><span class="line">    <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;my-var&quot;</span>: <span class="string">&quot;my-dev-value&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">&quot;production&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;host&quot;</span>: <span class="string">&quot;example.com&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;id-value&quot;</span>: <span class="number">6789</span>,</span><br><span class="line">    <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;my-var&quot;</span>: <span class="string">&quot;my-prod-value&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>이 예제에서는 development, production 환경을 사용할 수 있고, 그 내부에 정의 돼있는 <code>host</code>, <code>id-value</code> 와 같은 값들을 미리 정의 해놨다고 이해하면 된다. 테스트 할때 위 예제에서 봤듯이 <code>http://&#123;&#123;host&#125;&#125;/index.html</code> 와 같은 형식으로 사용할 수 있다. 물론 이 값들은 url 뿐만 아니라 헤더나 request body 영역에서도 치환해서 사용할 수 있다.</p>
<p>username과 password는 비어두었는데, 개인정보 등 공유되어서는 안될 민감한 정보들을 별도로 정의하기 위해서 비워두었다. <code>rest-client.private.env.json</code> (또는 <code>http-client.private.env.json</code>) 라는 파일 명으로 별도로 정의하여 사용할 수 있는데, 이는 형상관리에서 기본으로 제외되도록 설정돼있다고 한다.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;development&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;dev-user&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;dev-password&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;production&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;user&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;password&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>rest-client.env.json</code> 와 같이 이런 형태로 정의 해서 사용할 수 있다.</p>
<h2 id="테스트-결과값-받아서-사용하기"><a href="#테스트-결과값-받아서-사용하기" class="headerlink" title="테스트 결과값 받아서 사용하기"></a>테스트 결과값 받아서 사용하기</h2><p>이렇게 환경변수를 설정하는 방법은 <code>rest-client.env.json</code> 파일을 통해 미리 정의하는 방법 말고 또 한가지가 존재한다. 바로 http 호출 후 response handler를 정의해서 변수로 설정하는 방법이다. 아래 예제를 살펴보자. (참고로 response handler는 javascript 문법을 사용한다. 또한 자동완성까지 지원한다. ㄴㅇㄱ)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">POST http:&#x2F;&#x2F;localhost&#x2F;oauth&#x2F;token</span><br><span class="line">Content-Type: application&#x2F;x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">grant_type&#x3D;client_credentials&amp;scope&#x3D;read_profile</span><br><span class="line"></span><br><span class="line">&gt; &#123;% &#x2F;&#x2F;response handler</span><br><span class="line">client.global.set(&quot;access_token&quot;, response.body.access_token);</span><br><span class="line">client.log(client.global.get(&quot;access_token&quot;));</span><br><span class="line">%&#125;</span><br></pre></td></tr></table></figure>

<p>POST로 <code>http://localhost/oauth/token</code>를 호출하고 받는 response에서 response.body 의 access_token 값을 받아 client.global.set()이라는 함수로 변수 설정이 가능한데, 이 스크립트의 경우 “access_token”이라는 변수에 response.body 객체의 access_token 값을 할당 했다. (response.body 가 json형태일 경우다)</p>
<p>response 객체는 body 말고도 다른 속성들도 제공 해준다. 에디터에서 <code>response.</code>을 찍어서 우리의 친절한 intelliJ 자동완성의 도움을 받아 살펴보자.</p>
<img src="/20200405/IntelliJ%EC%97%90%EC%84%9C-http%EB%A1%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EA%B8%B0/image5.png" class title="설명5">

<p><code>body</code> 외에 <code>contentType</code>, <code>headers</code>, <code>status</code> 값들을 제공한다.</p>
<p>이를 잘 활용하면 ouath 토큰을 발급받아서 환경변수에 넣는 스크립트를 만들고, 그 이후에 실행하는 스크립트에서 발급받은 토큰을 포함하여 request 테스트를 하는 등의 케이스에서 활용할 수 있다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">### Get Token</span><br><span class="line">POST http:&#x2F;&#x2F;localhost&#x2F;oauth&#x2F;token</span><br><span class="line">Content-Type: application&#x2F;x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">grant_type&#x3D;client_credentials&amp;scope&#x3D;read_profile</span><br><span class="line"></span><br><span class="line">&gt; &#123;% &#x2F;&#x2F;response handler</span><br><span class="line">client.global.set(&quot;access_token&quot;, response.body.access_token);</span><br><span class="line">client.log(client.global.get(&quot;access_token&quot;));</span><br><span class="line">%&#125;</span><br><span class="line"></span><br><span class="line">###</span><br><span class="line"></span><br><span class="line">GET http:&#x2F;&#x2F;localhost&#x2F;data</span><br><span class="line">Authorization: bearer &#123;&#123;access_token&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>response handler는 이렇게 테스트 스크립트 내에 inline으로 작성하지만 별도의 js 파일로 만들어서 include 하는 방법도 존재한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GET host&#x2F;api&#x2F;test</span><br><span class="line"></span><br><span class="line">&gt; scripts&#x2F;my-script.js</span><br></pre></td></tr></table></figure>

<h2 id="초록-막대-초록-막대를-보자"><a href="#초록-막대-초록-막대를-보자" class="headerlink" title="초록 막대. 초록 막대를 보자!!"></a>초록 막대. 초록 막대를 보자!!</h2><p>거의 다 와 간다. 글 머리에 초록 막대를 볼 수 있다고 적어 놓았는데, 이제 초록 막대를 보는 방법, 즉 테스트 케이스 답게 스크립트로 만드는 방법을 알아보자.</p>
<p>간단하게는 아래와 같은 방법으로 사용할 수 있다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GET https:&#x2F;&#x2F;httpbin.org&#x2F;status&#x2F;200</span><br><span class="line"></span><br><span class="line">&gt; &#123;%</span><br><span class="line">    client.test(&quot;Request executed successfully&quot;, function() &#123;</span><br><span class="line">        client.assert(response.status &#x3D;&#x3D;&#x3D; 200, &quot;Response status is not 200&quot;);</span><br><span class="line">    &#125;);</span><br><span class="line">%&#125;</span><br></pre></td></tr></table></figure>

<p><code>client.assert</code>만으로도 잘 작동하기는 하나, 제대로 된 테스트 케이스는 테스트 정의가 잘 돼 있어야 하므로 <code>client.test</code>로 테스트 케이스가 작동하는 상황에 대해서 설명한 후 두번째 파라미터 함수로 실제 수행되는 테스트 코드를 넣어주면 된다.</p>
<p><code>client.assert</code>는 첫번째 파라미터에 테스트 하고자 하는 수식, 두번째 파라미터로 테스트가 실패할 경우 표시될 메세지를 넣어준다.</p>
<p>이제 ►를 눌러 실행해보자.</p>
<img src="/20200405/IntelliJ%EC%97%90%EC%84%9C-http%EB%A1%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EA%B8%B0/image6.png" class title="설명6">

<p>이제 마음의 평안을 얻을 수 있다. <code>response.status</code> 뿐만 아니라 body에서 어떤 결과를 받아왔는지 등으로도 테스트 케이스를 만들 수 있으니 잘 활용하면 좋다.</p>
<p>intelliJ에서 http로 테스트하기 끗!!</p>

                    
                        


                    
                    
                        <p>
                            <a href="/20200405/IntelliJ%EC%97%90%EC%84%9C-http%EB%A1%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EA%B8%B0/#post-footer" class="postShorten-excerpt_link link" aria-label>
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/20200316/%EC%98%AC%EB%B0%94%EB%A5%B8-commit-%EB%A9%94%EC%84%B8%EC%A7%80%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95/" aria-label=": 올바른 commit 메세지를 작성하는 방법">
                            올바른 commit 메세지를 작성하는 방법
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-03-16T23:40:00+09:00">
	
		    Mar 16, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/git/">git</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h3 id="사족"><a href="#사족" class="headerlink" title="사족"></a>사족</h3><p>그간 소중히(?) 작성하며(자주는 아니지만) 차곡차곡 써왔던 개인 블로그 글을 어느순간 날리게 되었다. 왜 날아가게 되었는지는 아직도 모른다. 사실 찐 원인은 간단하다.</p>
<img src="/20200316/%EC%98%AC%EB%B0%94%EB%A5%B8-commit-%EB%A9%94%EC%84%B8%EC%A7%80%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95/Jigsaws-Doll-Saw-Movies.jpg" class title="넌 평소에 보안과 백업을 소중히 하지 않았지">

<blockquote>
<p>“넌 평소에 보안과 백업을 소중히 하지 않았지”</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 사실 블로그는 홈 서버에 wordpress 로 대충 글만 올려놓고 있었는데, </span><br><span class="line">&quot;누가 내 블로그에 관심이나 있겠어?&quot; 라는 마인드로 보안쪽으로는 전혀 신경쓰지도, 관리하지도 않음.</span><br><span class="line">2. 그와중에 백업도주기적으로 안함</span><br></pre></td></tr></table></figure>


<p>사실 상용 서비스를 운용 할때는 보안과 백업은 기본중의 기본인 것을 쯧쯧.</p>
<p>그렇게 5개월치의 글을 날려먹고 한동안 글 쓸 의욕을 잃고 헤매다, 다시 마음을 다잡고 하나씩 글을 써 보고자 한다.</p>
<p>그리고 보안과 백업은 상대적으로 홈서버 운용보다 자유로는 github pages와 hexo로 옮겨왔다. 익힐게 많지만 이것도 또 하나의 즐거움 이리라.</p>
<h2 id="올바른-Commit-메세지를-작성하는-방법"><a href="#올바른-Commit-메세지를-작성하는-방법" class="headerlink" title="올바른 Commit 메세지를 작성하는 방법"></a>올바른 Commit 메세지를 작성하는 방법</h2><p>요즘은 progit이라는 책을 읽으며 git에 대해 공부하고 있다. “현업에서 git을 사용하고 있으므로, 이미 git은 어느정도 사용하는거 아냐?” 라고 할 수 있겠지만, 반은 맞고 반은 틀리다. 그냥 commit을 하고 pull request를 날리고, 코드 리뷰를 하고, merge를 하고 하는 수준은 할 수 있으나 “잘~” 쓰지는 못하고 있다. 그래서 git을 공부를 한다.</p>
<p>오늘은 그 중 가장 기초중의 상기초 커밋 메세지를 작성하는 방법에 대해서 쓰려고 한다. 깃에서 커밋 메세지를 남기는 방법은 간단하다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">&quot;커밋메세지&quot;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="잘-못-작성한-커밋-메세지의-예"><a href="#잘-못-작성한-커밋-메세지의-예" class="headerlink" title="잘 못 작성한 커밋 메세지의 예"></a>잘 못 작성한 커밋 메세지의 예</h3><blockquote>
<p>“이 커밋 메세지를 잘 남기라구? 어떻게 더 잘 남기지??”</p>
</blockquote>
<p>이런 의문이 생긴다면, 잘못 작성한 커밋 메세지의 예 부터 살펴보자</p>
<img src="/20200316/%EC%98%AC%EB%B0%94%EB%A5%B8-commit-%EB%A9%94%EC%84%B8%EC%A7%80%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95/example-wrong-commit-message.png" class title="과거의 나의 모습을 반성해 본다">

<p>멀리 갈 것도 없다. 작년 초의 내가 남긴 커밋이다. <del>황량하고 알 수 없는 커밋 메세지의 처참한 모습 이루 말할 수가 없다.</del></p>
<p>물론, 이 총체적 난국의 git 흔적들은 비단 커밋 메세지만이 문제가 아니지만, 오늘의 주제는 커밋 메세지 이므로 커밋 메세지에 집중해서 살펴보자</p>
<p>의미없는 커밋 메세지에, 심지어는 그마저도 귀찮았는지 <code>.</code> 도 있다. <del>미쳤구나</del> 물론 이 커밋 메세지를 남기던 나는 프로젝트 마감 일정에 쫒기어 정말 제정신이 아니었는데다가, 같이 개발하는 동료는 한명밖에 없었고, 서로 바로 옆자리에 앉아 빈번히 커뮤니케이션 하고 있었기 때문에 서로의 커밋 메세지가 외계어로 쓰이던 암호로 넣던 별 탈이 없었다. 그당시에는..</p>
<p>그러나, 소프트웨어는 한번 만들어 놓으면 끝이 아니다. 그리고 3개월 정도가 지나 열어 본 코드는 “내가 왜 이렇게 짰지? 이거 정말 내가 짠거 맞나?” 할정도로 낮설은 경우가 있다. <del>(3개월 전의 나는 내가 아니라 타인이다.)</del> 이럴 때 찾아보게 되는게 커밋 히스토린데 커밋 히스토리가 무의미한 커밋 메세지로 채워져 있따면.. 심지어 <code>.</code> 이라면?! <del>노답. 핵노답</del><br>생각만 해도 아찔한데 난 이미 겪었다. 이런 아찔한 순간을.. 캡쳐의 히스토리가 이야기 해주고 있지 않은가? 이건 경험담이다..</p>
<h3 id="어떻게-좋은-커밋-메세지를-작성할-것인가"><a href="#어떻게-좋은-커밋-메세지를-작성할-것인가" class="headerlink" title="어떻게 좋은 커밋 메세지를 작성할 것인가?"></a>어떻게 좋은 커밋 메세지를 작성할 것인가?</h3><p>좋은 커밋 메세지를 작성하는 방법에 대해서는 이미 여러 잘 쓰여진 글들이 있다.</p>
<p>그 중 하나를 소개해 본다.</p>
<p><a target="_blank" rel="external nofollow noopener noreferrer" href="http://blog.weirdx.io/post/33832">git 커밋 메세지 작성법</a></p>
<p>아래는 위 글에서 발췌한 훌륭한 git 커밋 메세지의 일곱가지 규칙이다.</p>
<blockquote>
<ol>
<li>제목과 본문을 빈 행으로 분리한다</li>
<li>제목 행을 50자로 제한한다</li>
<li>제목 행 첫 글자는 대문자로 쓴다</li>
<li>제목 행 끝에 마침표를 넣지 않는다</li>
<li>제목 행에 명령문을 사용한다</li>
<li>본문을 72자 단위로 개행한다</li>
<li>어떻게 보다는 무엇과 왜를 설명한다</li>
</ol>
</blockquote>
<p>위 글에 예시도 훌륭하게 나와있다. 핵심은 최대한 함축적으로 간결하게 제목을 작성하고,<br>본문에 상세한 내용을 기술 하라는 것이다. 나도 위 일곱가지 규칙에 동의 한다. 그러나 몇몇가지 우리 실정에 맞지 않는 규칙들도 있다. 이 일곱가지 규칙은 영어로 커밋 메세지를 작성할 때의 규칙인데, 우리는 한글로 커밋 메세지를 작성할 때도 많기 때문이다.</p>
<h4 id="2-제목-행을-50자로-제한한다"><a href="#2-제목-행을-50자로-제한한다" class="headerlink" title="2. 제목 행을 50자로 제한한다"></a>2. 제목 행을 50자로 제한한다</h4><p>이건 영어 기준이다. 한글 기준으로는 30자 정도가 적당한 것으로 보인다.<br>터미널에서 열었을때, 영어 2글자-&gt; 한글 한글자 정도의 너비를 갖고 있기 때문이다.</p>
<h4 id="3-제목-행-첫-글자는-대문자로-쓴다"><a href="#3-제목-행-첫-글자는-대문자로-쓴다" class="headerlink" title="3. 제목 행 첫 글자는 대문자로 쓴다"></a>3. 제목 행 첫 글자는 대문자로 쓴다</h4><p>음.. 어… 음.. 영어로 쓸때만 지키면 된다</p>
<h4 id="5-제목-행에-명령문을-사용한다"><a href="#5-제목-행에-명령문을-사용한다" class="headerlink" title="5. 제목 행에 명령문을 사용한다"></a>5. 제목 행에 명령문을 사용한다</h4><p>사실 오늘 커밋 메세지에 대한 글을 쓰는 이유는 이 항목에 대한 이유가 크다. 일단, 블로그 글들이 그렇듯이, 이 이하 기술하는 글들은 내 개인적인 의견임을 감안하길 바란다.</p>
<p>이 항목 때문에 한글 커밋 메세지에 대해서도 명령문을 사용하는것을 strict하게 지켜서</p>
<blockquote>
<p>“스프링 프레임워크의 버전을 업그레이드 하라”<br>“NullPointerException 방지 코드를 넣어라”</p>
</blockquote>
<p>하는 식으로 커밋 메세지를 작성하는 경우를 꽤나 보았고, 이렇게 쓰기를 권고하는 블로그 글들도 많이 보았다. 개인적으로는 이런 형태의 커밋 메세지가 굉장히 이질적이기 때문에 별로 좋아하지 않는데, 왜 이렇게 작성 해야 하는지에 대해서도 열심히 찾아 보았는다.<br>개인적으로 판단한 이 컨벤션의 시초는 “영어로 커밋 메세지를 작성” 할 때의 규칙을 그대로 한글로 들고 왔기 때문에 이런 일이 발생했다고 본다.</p>
<blockquote>
<p>I refactored subsystem X for readability =&gt; (X)<br>Refactor subsystem X for readability =&gt; (O)</p>
</blockquote>
<p>쓸때없는 I는 없애버리고(글자 제한이 있으므로), git 시스템의 관점에서 수행한 일을 현재시제로 작성하게 되면, 이게 바로 영문법에서의 명령형이다.</p>
<p>위 링크에 소개한 글에서는 이런 식으로 작성할 것을 권고 한다.</p>
<blockquote>
<p>만약 이 커밋이 적용되면 이 커밋은 <strong>가독성을 위해 서브시스템 X를 리팩토링한다</strong><br>=&gt; 가독성을 위해 서브시스템 X를 리팩토링한다<br>만약 이 커밋이 적용되면 이 커밋은 <strong>Getting Started 문서를 갱신한다</strong><br>=&gt; Getting Started 문서를 갱신한다</p>
</blockquote>
<p>그러나 좀 부족한 것이 있다. 영문 명령형으로 커밋 메세지를 작성하게 되면 극명히 보이는 장점이 있다.</p>
<blockquote>
<p><strong>refactor</strong> subsystem X for readability<br><strong>update</strong> getting started documentation<br><strong>remove</strong> deprecated methods<br><strong>release</strong> version 1.0.0<br><strong>merge</strong> pull request #123 from user/branch</p>
</blockquote>
<p><code>동사 + 목적어</code> 로 표현되는 영문법 어순 특성 상, 어떤 행위를 했는지가 문장 제일 앞에 정렬 된다는 점이다. 이런 장점 때문에 더더욱 명령형으로 커밋 메세지를 작성 하라고 하는 것인데, 한글에서 그대로 이런 컨벤션을 사용하게 될 경우, 우측정렬을 하여 커밋 메세지를 보지 않는 이상 이런 장점은 누릴 수가 없게 된다.</p>
<h5 id="방법-1"><a href="#방법-1" class="headerlink" title="방법 1."></a>방법 1.</h5><p>따라서 한글로 작성하게 될 경우, 커밋이 담고있는 가장 큰 함축적인 행위의 동사를 제일 앞에 말머리로 붙여주고, 뒤에 커밋 메세지를 작성하는 것이 좋을 것 같다. 자연스런 문장을 위해 단어가 두번 들어가는것도 나쁘지 않다.</p>
<blockquote>
<p>리팩토링 - 서브 시스템 X. 가독성 향상 목적<br>갱신 - Getting Started 문서</p>
</blockquote>
<h5 id="방법-2"><a href="#방법-2" class="headerlink" title="방법 2."></a>방법 2.</h5><p>아니면 팀만이 사용하는 기호를 사용해 핵심 행위를 가리키는 단어를 강조하는 것도 좋은 방법 중의 하나일 것이다.</p>
<blockquote>
<p>가독성을 위해 서브 시스템 X를 [리팩토링]<br>Getting Started 문서 [갱신]</p>
</blockquote>
<h5 id="방법-3"><a href="#방법-3" class="headerlink" title="방법 3."></a>방법 3.</h5><p>세번째 방법은, 어차피 프로그램 개발에서 하는 행위들은 몇가지로 정해져 있고, 이는 카테고리화가 가능할 것 같다. Add, Refactor, Remove, Release 등등.. 이런 카테고리들을 팀별로 미리 정의 해 두고 앞부분에 prefix를 붙이는 것도 한 방법이다.</p>
<blockquote>
<p>refactor - 가독성을 위해 서브 시스템 X를<br>update - Getting Started 문서</p>
</blockquote>
<h2 id="마무으리"><a href="#마무으리" class="headerlink" title="마무으리"></a>마무으리</h2><p>뭐, 이 외에도 여러 아이디어가 있을 수 있겠다. 핵심은, <strong>함축적인 커밋 메세지를 한눈에 파악할 수 있도록 가독성을 확보하는 자신만의, 팀만의 방법을 찾는 것</strong>이다.<br>(본인도 아직 팀원들과 이야기 하며 더 연구하고 찾는 중이다.) 그러나 이런 방법들이 고민스러워 컨벤션을 못 정하겠다면 일단 <code>.</code> 만은 피하자.</p>
<p>순간 바쁘고 귀찮다고 <code>.</code>만을 남겼을때 지금의 나에게 화내고 있을 3개월 후의 나를 위해서, 1분만 더 고민하고 커밋 메세지를 남기는 습관을 들이는게 제일 중요하다.</p>
<p>그럼 난 이만, 1년 전의 나에게 벌을 주러 가보려 한다..</p>

                    
                        


                    
                    
                        <p>
                            <a href="/20200316/%EC%98%AC%EB%B0%94%EB%A5%B8-commit-%EB%A9%94%EC%84%B8%EC%A7%80%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95/#post-footer" class="postShorten-excerpt_link link" aria-label>
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">page 1 of 1</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2021 shockshot@naver.com. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">shockshot@naver.com</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover2.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-ofs4ykkzhow0axhilcw7ijqajqncd242ivjtsphmyhqoivownzrn8dpzz1yu.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
